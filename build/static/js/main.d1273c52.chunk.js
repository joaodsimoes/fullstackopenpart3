(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(14),c=t.n(r),u=t(2),l=function(e){var n=e.entry,t=e.onClick;return o.a.createElement("li",null,n.name,": ",n.number," ",o.a.createElement("button",{onClick:t},"Delete")," ")},i=function(e){return o.a.createElement("div",null,e.description," ",o.a.createElement("input",{value:e.value,onChange:e.onChange,required:!0}))},d=function(e){return o.a.createElement("form",{onSubmit:e.addPerson},o.a.createElement(i,{description:"name",value:e.newName,onChange:e.handleNameChange}),o.a.createElement(i,{description:"number",value:e.newNumber,onChange:e.handleNumberChange}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Add")))},s=t(4),m={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},f=function(e){var n=e.message,t=e.error;return null===n?null:(m=t?Object(s.a)(Object(s.a)({},m),{},{color:"red"}):Object(s.a)(Object(s.a)({},m),{},{color:"green"}),o.a.createElement("div",{style:m,className:"notification"},n))},b=t(3),h=t.n(b),p="/api/persons",g=function(){return h.a.get(p).then((function(e){return e.data}))},v=function(e){return h.a.post(p,e).then((function(e){return e.data}))},E=function(e,n){return h.a.put("".concat(p,"/").concat(e),n).then((function(e){return e.data}))},j=function(e){return h.a.delete("".concat(p,"/").concat(e)).then((function(e){return e.data}))},O=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),s=Object(u.a)(c,2),m=s[0],b=s[1],h=Object(a.useState)(""),p=Object(u.a)(h,2),O=p[0],w=p[1],y=Object(a.useState)(""),C=Object(u.a)(y,2),k=C[0],N=C[1],S=Object(a.useState)(null),x=Object(u.a)(S,2),P=x[0],D=x[1],q=Object(a.useState)(!1),B=Object(u.a)(q,2),F=B[0],J=B[1];Object(a.useEffect)((function(){console.log("Requesting persons in phonebook..."),g().then((function(e){console.log("Promise fulfilled",e),r(e)}))}),[]);var R=t.filter((function(e){return e.name.toUpperCase().includes(k.toUpperCase())})),U=function(e,n){J(n),D(e),setTimeout((function(){D(null)}),5e3)};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(f,{message:P,error:F}),o.a.createElement(d,{addPerson:function(e){e.preventDefault();var n={name:m,number:O},a=t.find((function(e){return e.name===m}));void 0!==a?window.confirm("".concat(m," has already been added to the phonebook, replace old number with new one?"))&&E(a.id,n).then((function(e){r(t.map((function(n){return n.id!==a.id?n:e}))),U("".concat(a.name,"'s info was successfully updated."),!1)})).catch((function(e){r(t.filter((function(e){return e.id!==a.id}))),U("".concat(a.name,"'s info has already been deleted from the server."),!0)})):v(n).then((function(e){r(t.concat(e)),U("".concat(e.name," was successfully added to the phonebook."),!1)}));b(""),w("")},newName:m,handleNameChange:function(e){console.log(e.target.value),b(e.target.value)},newNumber:O,handleNumberChange:function(e){console.log(e.target.value),w(e.target.value)}}),o.a.createElement("h2",null,"Filter by name"),o.a.createElement(i,{description:"Filter",value:k,onChange:function(e){console.log(e.target.value),N(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement("ul",null,R.map((function(e){return o.a.createElement(l,{key:e.id,entry:e,onClick:function(){return function(e){var n="Delete ".concat(e.name,"?");if(window.confirm(n)){var a=e.id;j(a).then((function(n){r(t.filter((function(e){return e.id!==a}))),U("".concat(e.name," was deleted."),!1)})).catch((function(n){r(t.filter((function(e){return e.id!==a}))),U("".concat(e.name," has already been deleted."),!0)}))}}(e)}})}))))};c.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.d1273c52.chunk.js.map